"""–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π."""

from typing import Dict, Any

def format_help_message(has_llm: bool = False, has_image: bool = False) -> str:
    """–§–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç —Å–ø—Ä–∞–≤–æ—á–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ."""
    commands = [
        "/start - –ó–Ω–∞–∫–æ–º—Å—Ç–≤–æ —Å–æ –º–Ω–æ–π",
        "/help - –≠—Ç–∞ —Å–ø—Ä–∞–≤–∫–∞",
        "/info - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–±–æ –º–Ω–µ"
    ]
    
    if has_llm:
        commands.extend([
            "/clear - –û—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é –¥–∏–∞–ª–æ–≥–∞",
            "/stats - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–∞–±–æ—Ç—ã"
        ])
    
    if has_image:
        commands.extend([
            "/image <–æ–ø–∏—Å–∞–Ω–∏–µ> - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è",
            "/style - –î–æ—Å—Ç—É–ø–Ω—ã–µ —Å—Ç–∏–ª–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π"
        ])
    
    help_text = f"""ü§ñ –°–ø—Ä–∞–≤–∫–∞ –ø–æ –±–æ—Ç—É

–ü—Ä–∏–≤–µ—Ç! –Ø –ê–ª–∏—Å–∞, —Ç–≤–æ–π –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫!

üìã –î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:
{chr(10).join(commands)}

üí¨ –ü—Ä–æ—Å—Ç–æ –ø–∏—à–∏ –º–Ω–µ —Å–æ–æ–±—â–µ–Ω–∏—è, –∏ —è –æ—Ç–≤–µ—á—É!

{'üß† –£–º–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã —á–µ—Ä–µ–∑ LLM –∞–∫—Ç–∏–≤–Ω—ã' if has_llm else 'üìù –†–∞–±–æ—Ç–∞—é –≤ —Ä–µ–∂–∏–º–µ —à–∞–±–ª–æ–Ω–æ–≤'}
{'üé® –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –¥–æ—Å—Ç—É–ø–Ω–∞' if has_image else ''}"""
    
    return help_text

def format_stats(services_stats: Dict[str, Any]) -> str:
    """–§–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —Å–µ—Ä–≤–∏—Å–æ–≤."""
    lines = ["üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤:\n"]
    
    # LLM —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
    llm_stats = services_stats.get('llm', {})
    if llm_stats.get('available'):
        lines.append(f"üß† LLM: ‚úÖ {llm_stats.get('model', '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ')}")
    else:
        lines.append("üß† LLM: ‚ùå –ù–µ–¥–æ—Å—Ç—É–ø–Ω–æ")
    
    # –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞  
    image_stats = services_stats.get('image', {})
    if image_stats.get('initialized'):
        lines.append(f"üé® –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è: ‚úÖ {image_stats.get('model', '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ')}")
    else:
        lines.append("üé® –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è: ‚ùå –ù–µ–¥–æ—Å—Ç—É–ø–Ω–æ")
    
    return "\n".join(lines)